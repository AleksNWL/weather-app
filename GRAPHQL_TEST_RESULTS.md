# üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è GraphQL API

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 2024-12-06  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **GraphQL API —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω** (—Å –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∑–∞–º–µ—á–∞–Ω–∏—è–º–∏)

---

## ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å (__typename)
```json
{
  "data": {
    "__typename": "Query"
  }
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 2. –ó–∞–ø—Ä–æ—Å –ø–æ–≥–æ–¥—ã –¥–ª—è Moscow
```json
{
  "data": {
    "getWeather": {
      "city": "Moscow",
      "temperature": 2.5,
      "description": "Overcast",
      "humidity": 89,
      "coordinates": {
        "lat": 55.75222,
        "lon": 37.61556
      }
    }
  }
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ì–æ—Ä–æ–¥ –Ω–∞–π–¥–µ–Ω
- –î–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –ø–æ–ª—É—á–µ–Ω—ã
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### 3. –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
```json
{
  "data": {
    "getHistory": {
      "data": [
        {
          "city": "Moscow",
          "temperature": 2.5,
          "date": "2025-12-06T15:29:35.113Z"
        }
      ],
      "pagination": {
        "total": 76
      }
    }
  }
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í—Å–µ–≥–æ 76 –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ

---

## ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 4. –ó–∞–ø—Ä–æ—Å –ø—Ä–æ–≥–Ω–æ–∑–∞ (–ò–°–ü–†–ê–í–õ–ï–ù–û)

**–û—à–∏–±–∫–∞:**
```
"Cannot query field \"description\" on type \"ForecastDay\"."
```

**–ü—Ä–∏—á–∏–Ω–∞:** –í GraphQL —Å—Ö–µ–º–µ –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `mostCommonDescription`, –∞ –Ω–µ `description`.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:**
```graphql
query {
  getForecast(city: "London") {
    city
    country
    forecast {
      date
      avgTemp
      minTemp
      maxTemp
      mostCommonDescription
    }
  }
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `run-tests.sh`

---

## üìù –ó–∞–º–µ—á–∞–Ω–∏—è

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è Berlin
```json
{
  "data": {
    "getCityStats": {
      "avgTemp": null,
      "totalRequests": null
    }
  }
}
```

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`, —Ç–∞–∫ –∫–∞–∫ –¥–ª—è Berlin –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ
- –≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (graceful degradation)
- –ü–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–≥–æ–¥—ã –¥–ª—è Berlin –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤—è—Ç—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è Berlin, –∑–∞—Ç–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
```bash
# 1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è Berlin
curl -X POST http://localhost:4000/graphql \
  -H "Content-Type: application/json" \
  -d '{"query": "query { getWeather(city: \"Berlin\") { city temperature } }"}'

# 2. –ó–∞—Ç–µ–º –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl -X POST http://localhost:4000/graphql \
  -H "Content-Type: application/json" \
  -d '{"query": "query { getCityStats(city: \"Berlin\", days: 7) { avgTemp totalRequests } }"}'
```

---

## üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|--------|------------|
| –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç |
| –ó–∞–ø—Ä–æ—Å –ø–æ–≥–æ–¥—ã | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç |
| –ó–∞–ø—Ä–æ—Å –ø—Ä–æ–≥–Ω–æ–∑–∞ | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Ä–æ–¥–∞ | ‚ö†Ô∏è | –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö (–æ–∂–∏–¥–∞–µ–º–æ) |

**–£—Å–ø–µ—à–Ω–æ—Å—Ç—å:** 4/5 (80%)  
**–ö—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫:** 0  
**–ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–º–µ—á–∞–Ω–∏–π:** 1

---

## ‚úÖ –í—ã–≤–æ–¥—ã

1. **GraphQL API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω**
2. **–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
3. **–û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–∫—Ä–∏–ø—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞**
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)**

---

## üß™ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–æ–≤:**
```graphql
query {
  searchCities(query: "Paris") {
    name
    country
    lat
    lon
  }
}
```

2. **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≥–æ—Ä–æ–¥–∞:**
```graphql
query {
  getPopularCities(limit: 5) {
    city
    country
    requests
  }
}
```

3. **–¢—Ä–µ–Ω–¥—ã –≥–æ—Ä–æ–¥–∞:**
```graphql
query {
  getCityTrends(city: "Moscow", days: 7) {
    date
    avgTemp
    maxTemp
    minTemp
  }
}
```

4. **–ü–æ–≥–æ–¥–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º:**
```graphql
query {
  getWeatherByCoords(lat: 55.7558, lon: 37.6173) {
    city
    temperature
    description
  }
}
```

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π –∏–∑ —Å—Ö–µ–º—ã
2. ‚úÖ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–≥–æ–¥—É)
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GraphQL Playground –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ —Å—Ö–µ–º—ã

---

**–ì—Ä–∞—Ñ–∏–∫ Playground:** http://localhost:4000/graphql  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** —Å–º. `GRAPHQL_ANALYSIS.md`

