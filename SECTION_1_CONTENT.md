# РАЗДЕЛ 1. ОБЩИЕ СВЕДЕНИЯ

## 1.1 Описание предметной области

### 1.1.1 Общее описание приложения

Weather App представляет собой веб-приложение, разработанное для получения информации о текущих погодных условиях, долгосрочного прогноза погоды и анализа статистики запросов пользователей. Приложение реализовано с использованием современных веб-технологий и следует принципам микросервисной архитектуры.

Основной функционал приложения включает в себя:

- получение актуальных данных о погоде для выбранного города;
- отображение прогноза погоды на 5 дней вперед;
- ведение истории запросов пользователей;
- предоставление аналитической информации о популярных городах и температурных трендах;
- поддержка русского языка для удобства пользователей.

Приложение интегрируется с бесплатным API Open-Meteo, который предоставляет метеорологические данные без необходимости авторизации. Данное решение позволяет получать актуальную информацию о погоде для любого города мира, используя географические координаты, полученные по названию населенного пункта.

Клиентская часть приложения реализована на базе React 19.x с использованием TypeScript, что обеспечивает типобезопасность и улучшенную поддержку разработки. Серверная часть построена на основе микросервисной архитектуры с использованием Node.js и Express.js, что обеспечивает масштабируемость и независимость компонентов системы.

### 1.1.2 Целевая аудитория

Целевая аудитория приложения Weather App включает три основные группы пользователей:

**Конечные пользователи** – люди, интересующиеся информацией о текущих погодных условиях и прогнозом погоды. Данная группа пользователей использует приложение для получения актуальных метеорологических данных для планирования повседневной деятельности, путешествий или других целей, связанных с погодными условиями.

**Разработчики** – специалисты в области разработки программного обеспечения, которые могут использовать данное приложение в качестве reference implementation микросервисной архитектуры. Приложение демонстрирует практическое применение современных архитектурных паттернов, таких как API Gateway, микросервисы, MVC (Model-View-Controller), и может служить учебным материалом или основой для разработки аналогичных систем.

**Администраторы систем** – специалисты, ответственные за развертывание и управление инфраструктурой приложения. Для данной группы пользователей приложение предоставляет конфигурационные файлы для развертывания в Docker и Kubernetes, что упрощает процесс управления и масштабирования системы.

### 1.1.3 Предметная область: Метеорология и информационные системы

Предметная область разрабатываемого приложения охватывает две взаимосвязанные области: метеорологию и информационные системы.

**Метеорологический аспект** включает в себя работу с метеорологическими данными, такими как:

- температура воздуха (в градусах Цельсия);
- относительная влажность (в процентах);
- атмосферное давление (в гектопаскалях);
- скорость и направление ветра (в метрах в секунду и градусах);
- описание погодных условий (облачность, осадки и т.д.).

Источником метеорологических данных является Open-Meteo API – бесплатный сервис, предоставляющий актуальную информацию о погоде без необходимости регистрации или авторизации. API использует данные из различных метеорологических моделей и обеспечивает высокую точность прогнозов.

**Аспект информационных систем** включает в себя:

- обработку и хранение метеорологических данных;
- предоставление интерфейсов для взаимодействия с данными (GraphQL и REST API);
- анализ статистики запросов пользователей;
- визуализацию данных с помощью графиков и диаграмм;
- управление историей запросов и аналитической информацией.

Географические координаты городов получаются по их названию с использованием Open-Meteo Geocoding API. Система поддерживает поиск городов как на русском, так и на английском языке, автоматически выполняя транслитерацию кириллических названий в латиницу для взаимодействия с внешним API.

Временные периоды, обрабатываемые системой, включают:

- текущие погодные условия (актуальные данные на момент запроса);
- прогноз погоды на 5 дней вперед (ежедневные данные с максимальными и минимальными температурами).

Точность координат составляет до 0.01° (примерно 1 километр), что обеспечивает достаточную точность для большинства городов, хотя может быть менее точно для малых населенных пунктов.

---

## 1.2 Функциональные требования к системе

### 1.2.1 Поиск и выбор города

Система должна предоставлять возможность поиска и выбора города для получения информации о погоде. Функциональные требования включают:

- возможность ввода названия города на русском или английском языке;
- выполнение автодополнения с использованием Open-Meteo Geocoding API при вводе текста;
- автоматическую транслитерацию кириллических символов в латиницу для взаимодействия с внешним API;
- отображение списка предложений с указанием названия города, страны и региона (штата, области);
- возможность выбора одного из предложенных городов из списка автодополнения.

Реализация поиска городов обеспечивает удобство использования приложения для русскоязычных пользователей, позволяя вводить названия городов на родном языке без необходимости знания английских названий.

### 1.2.2 Получение текущей погоды

После выбора города система должна отображать текущие погодные условия. Функциональные требования включают:

- отображение текущей температуры воздуха в градусах Цельсия;
- отображение описания погодных условий (например, "Облачно", "Ясно", "Дождь");
- отображение относительной влажности в процентах;
- отображение атмосферного давления в гектопаскалях (hPa);
- отображение скорости ветра в метрах в секунду;
- отображение направления ветра в градусах (0-360°);
- отображение иконки, соответствующей текущим погодным условиям;
- автоматическое обновление информации при выборе нового города;
- кэширование данных на клиентской стороне с временем жизни (TTL) 5 минут для уменьшения количества запросов к серверу.

Данные о текущей погоде получаются из Open-Meteo Current Weather API и обновляются при каждом запросе, если кэш истек или отсутствует.

### 1.2.3 Долгосрочный прогноз

Система должна предоставлять прогноз погоды на 5 дней вперед. Функциональные требования включают:

- отображение прогноза погоды на 5 дней вперед;
- для каждого дня отображение максимальной и минимальной температуры;
- отображение средней температуры за день;
- отображение описания погодных условий для каждого дня;
- отображение иконки погоды для каждого дня прогноза;
- отображение средней влажности за день.

Данные для долгосрочного прогноза получаются из Open-Meteo Daily Forecast API. Прогноз обновляется при каждом запросе, если кэш истек, и также кэшируется на клиентской стороне с TTL 5 минут.

### 1.2.4 История запросов

Система должна вести историю всех запросов пользователей о погоде. Функциональные требования включают:

- автоматическое сохранение каждого запроса о погоде в базу данных с указанием временной метки (timestamp);
- сохранение истории в MongoDB через analytics-service;
- отправку данных о запросе на analytics-service для последующего анализа и статистики;
- возможность просмотра истории запросов через GraphQL API с поддержкой пагинации;
- возможность очистки истории через специальный cleanup endpoint;
- отображение в истории следующих данных: название города, температура, описание погоды, дата и время запроса.

История запросов позволяет пользователям отслеживать ранее запрошенную информацию о погоде и используется системой для формирования статистики и аналитики.

### 1.2.5 Аналитика и статистика

Система должна предоставлять аналитическую информацию о запросах пользователей. Функциональные требования включают:

- отслеживание популярных городов на основе количества запросов (счетчик запросов для каждого города);
- отображение графика "Популярные города" с визуализацией количества запросов;
- отображение графика "История запросов по времени" для анализа активности пользователей;
- сохранение статистических данных в MongoDB;
- предоставление REST API endpoints для получения статистики:
  - GET /stats/cities – статистика по всем городам;
  - GET /stats/city/:city – статистика по конкретному городу;
  - GET /popular – список популярных городов с количеством запросов;
  - GET /trends/:city – температурные тренды для конкретного города за определенный период.

Аналитические данные позволяют выявить наиболее популярные города среди пользователей и проанализировать температурные изменения за определенный период времени.

### 1.2.6 GraphQL API

Система должна предоставлять GraphQL API для взаимодействия с данными. Функциональные требования включают:

- наличие GraphQL endpoint на gateway для всех запросов погодных данных;
- поддержку следующих GraphQL queries:
  - getWeather(city) – получение текущей погоды для города;
  - getForecast(city) – получение прогноза на 5 дней;
  - searchCities(query) – поиск городов по запросу;
  - getCityStats(city, days) – получение статистики по городу за указанный период;
  - getCityTrends(city, days) – получение температурных трендов;
  - getPopularCities(limit) – получение списка популярных городов;
  - getHistory(page, limit) – получение истории запросов с пагинацией;
- использование GraphQL Schema Definition Language (SDL) для описания типов данных и запросов;
- возможность расширения API через Subscriptions для real-time обновлений (планируется на будущее).

GraphQL API обеспечивает гибкость запросов, позволяя клиенту запрашивать только необходимые поля данных, что оптимизирует объем передаваемой информации.

### 1.2.7 REST API

Система должна предоставлять REST API для взаимодействия с микросервисами. Функциональные требования включают:

- Weather Service endpoints:
  - GET /weather/:city – получение текущей погоды для города;
  - GET /forecast/:city – получение прогноза на 5 дней;
  - GET /search/:query – поиск городов (автодополнение);
  - GET /geocode/:city – получение координат города;

- Analytics Service endpoints:
  - GET /stats/cities – статистика по всем городам;
  - GET /stats/city/:city – статистика по конкретному городу;
  - GET /popular?limit=N – популярные города;
  - GET /trends/:city?days=N – температурные тренды;
  - GET /history?page=N&limit=M – история запросов с пагинацией;
  - POST /history – добавление записи в историю;
  - DELETE /cleanup – очистка истории запросов;

- Health check endpoints:
  - GET /health – проверка работоспособности сервиса (на каждом сервисе).

REST API обеспечивает прямую интеграцию с микросервисами и может использоваться для административных задач и мониторинга системы.

---

## 1.3 Нефункциональные требования

### 1.3.1 Производительность

Система должна обеспечивать высокую производительность и быстрый отклик на запросы пользователей. Нефункциональные требования к производительности включают:

- время ответа для получения текущей погоды должно составлять менее 2 секунд, включая сетевую задержку;
- время ответа для поиска городов должно составлять менее 1 секунды;
- реализация кэширования на клиентской стороне через localStorage с временем жизни (TTL) 5 минут для уменьшения количества запросов к серверу;
- планируется реализация server-side кэширования (in-memory) для дальнейшей оптимизации производительности;
- использование времени-ориентированного инвалидирования кэша (TTL = 5 минут), что обеспечивает баланс между актуальностью данных и производительностью.

Кэширование позволяет значительно уменьшить нагрузку на внешний API Open-Meteo и улучшить пользовательский опыт за счет мгновенного отображения данных из кэша при повторных запросах.

### 1.3.2 Масштабируемость

Система должна поддерживать горизонтальное масштабирование для обработки увеличения нагрузки. Нефункциональные требования к масштабируемости включают:

- поддержку горизонтального масштабирования через Kubernetes с возможностью увеличения количества реплик от 1 до 5 для каждого сервиса;
- использование load balancer для распределения запросов между pod'ами в Kubernetes;
- реализацию stateless микросервисов, не имеющих привязки к конкретному инстансу, что обеспечивает возможность масштабирования без потери данных;
- использование MongoDB с репликацией (3+ узлов для production окружения) для обеспечения отказоустойчивости и масштабируемости базы данных;
- планируется реализация автоматического масштабирования на основе метрик CPU и Memory (Horizontal Pod Autoscaler в Kubernetes).

Архитектура микросервисов обеспечивает независимое масштабирование каждого компонента системы в зависимости от нагрузки.

### 1.3.3 Надежность

Система должна обеспечивать высокую надежность и отказоустойчивость. Нефункциональные требования к надежности включают:

- реализацию обработки ошибок при взаимодействии с Open-Meteo API, включая механизмы fallback и retry для повышения устойчивости к сбоям внешнего сервиса;
- планируется реализация graceful shutdown микросервисов с корректной обработкой сигнала SIGTERM и завершением активных соединений;
- наличие health check endpoints (/health) на каждом сервисе для мониторинга работоспособности компонентов системы;
- планируется реализация паттерна Circuit Breaker для изоляции отказов между микросервисами и предотвращения каскадных сбоев;
- реализацию логирования всех операций и ошибок для последующего анализа и отладки системы.

Надежность системы обеспечивается за счет изоляции компонентов, обработки ошибок и мониторинга состояния сервисов.

### 1.3.4 UI/UX качество

Система должна обеспечивать высокое качество пользовательского интерфейса и удобство использования. Нефункциональные требования к UI/UX включают:

- реализацию плавных переходов между состояниями интерфейса с длительностью анимации 0.2-0.3 секунды;
- наличие анимаций при наведении курсора (hover effects) для улучшения интерактивности интерфейса;
- использование loading skeletons для асинхронных операций, что обеспечивает визуальную обратную связь пользователю во время загрузки данных;
- реализацию плавных цветовых переходов при смене темы (темная/светлая) для комфортного восприятия;
- использование только CSS-анимаций без JavaScript анимаций для обеспечения высокой производительности и плавности интерфейса.

Качественный пользовательский интерфейс с современным дизайном (glassmorphism) и плавными анимациями обеспечивает положительный пользовательский опыт.

### 1.3.5 Совместимость

Система должна обеспечивать совместимость с различными платформами и браузерами. Нефункциональные требования к совместимости включают:

- поддержку современных браузеров: Chrome, Firefox, Safari (последние 2 версии);
- поддержку мобильных браузеров: iOS Safari, Chrome Mobile;
- реализацию responsive design для экранов от 320px (мобильные устройства) до 2560px (4K мониторы);
- использование Node.js версии 18.x LTS для серверной части приложения;
- использование React версии 19.x для клиентской части приложения.

Совместимость с различными платформами и браузерами обеспечивает доступность приложения для широкого круга пользователей независимо от используемого устройства.

---

## 1.4 Ограничения проекта

### 1.4.1 Технические ограничения

При разработке проекта были выявлены следующие технические ограничения, которые необходимо учитывать при использовании системы:

**Ограничения Open-Meteo API (бесплатная версия):**

Open-Meteo API предоставляет бесплатный доступ к метеорологическим данным без необходимости регистрации или авторизации. Однако бесплатная версия имеет следующие ограничения:

- лимит на количество запросов составляет приблизительно 10 000 запросов в день;
- отсутствие гарантий доступности сервиса (SLA) для бесплатного тарифа;
- ограниченная поддержка со стороны провайдера API.

Для минимизации влияния данных ограничений в системе реализовано клиентское кэширование данных с временем жизни (TTL) 5 минут, что позволяет значительно уменьшить количество запросов к внешнему API и обеспечить работу приложения даже при временной недоступности сервиса.

**Ограничения MongoDB:**

В текущей реализации проекта используется MongoDB в режиме single node в Docker для разработки. Данная конфигурация имеет следующие ограничения:

- отсутствие автоматического восстановления при отказе узла базы данных в development окружении;
- для production окружения требуется настройка репликации с минимум 3 узлами для обеспечения отказоустойчивости;
- ограниченная производительность при высокой нагрузке без репликации.

**Ограничения точности координат:**

Система использует координаты с точностью до 0.01° (примерно 1 километр), что обеспечивает достаточную точность для большинства городов, но может быть менее точно для малых населенных пунктов или районов внутри крупных городов. Данное ограничение связано с особенностями работы Open-Meteo Geocoding API.

**Ограничения диапазона прогноза:**

Open-Meteo API предоставляет прогноз погоды только на 5 дней вперед. Данное ограничение не позволяет реализовать долгосрочный прогноз на более длительный период (например, на неделю или месяц), что может быть востребовано некоторыми пользователями.

**Ограничения обновления данных в реальном времени:**

Данные о погоде на Open-Meteo обновляются каждый час, что означает отсутствие обновлений в реальном времени в течение часа. Пользователи могут видеть данные, которые были актуальны на момент последнего обновления, но не обязательно в текущий момент времени.

### 1.4.2 Бизнес-ограничения

Помимо технических ограничений, проект имеет следующие бизнес-ограничения:

**Бюджетные ограничения:**

Проект разрабатывается с минимальным бюджетом, что означает использование только бесплатных или open-source решений. Все используемые сервисы и инструменты относятся к категории free-tier или имеют открытую лицензию:

- Open-Meteo API – бесплатный тариф;
- MongoDB – open-source версия;
- Docker и Kubernetes – open-source платформы;
- Все библиотеки и фреймворки – open-source с открытыми лицензиями.

Данное ограничение исключает использование платных облачных сервисов или коммерческих решений, что может влиять на доступность и производительность системы при масштабировании.

**Ограничения команды разработки:**

Проект разрабатывается командой из 1-2 разработчиков, что накладывает следующие ограничения:

- необходимость простоты развертывания и поддержки системы;
- ограниченные возможности для реализации сложных функций, требующих значительных временных затрат;
- фокус на MVP (Minimum Viable Product) с базовым функционалом.

Данные ограничения определяют выбор архитектурных решений, направленных на упрощение разработки и поддержки системы.

**Временные ограничения:**

Проект разработан в рамках курсовой работы с ограниченными сроками выполнения. MVP приложения готов на текущую дату, что означает:

- реализован минимально необходимый функционал для демонстрации архитектурных решений;
- некоторые функции могут быть помечены как "планируется" для будущей реализации;
- приоритет отдается демонстрации архитектурных паттернов и принципов, а не полной функциональности.

**Ограничения инфраструктуры:**

Развертывание приложения ограничено следующими вариантами инфраструктуры:

- локальная разработка с использованием Docker Compose;
- развертывание в Kubernetes кластере (локальном или облачном).

Отсутствие специализированной облачной инфраструктуры может ограничивать возможности масштабирования и мониторинга системы в production окружении.

**Ограничения лицензирования:**

Проект разрабатывается как open-source решение с лицензией MIT или Apache 2.0, что означает:

- свободное использование и модификация кода;
- отсутствие коммерческих ограничений;
- необходимость соблюдения условий open-source лицензий используемых библиотек.

Данные ограничения определяют выбор технологий и подходов к разработке, обеспечивая соответствие проекта принципам open-source разработки.

---

## ПРИМЕЧАНИЯ К ФОРМАТИРОВАНИЮ

1. **Абзацы** должны иметь отступ 1,25 см
2. **Межстрочный интервал** – 1,5
3. **Шрифт** – Times New Roman, 14 пт
4. **Ссылки на источники** оформляются в квадратных скобках [1], [2]
5. **Таблицы** нумеруются как Таблица 1.1, Таблица 1.2 и т.д.
6. **Рисунки** нумеруются как Рисунок 1.1, Рисунок 1.2 и т.д.

---

## ИСТОЧНИКИ ДЛЯ РАЗДЕЛА 1

- DOCUMENTATION.md, раздел 1 (Описание предметной области)
- DOCUMENTATION.md, раздел 2 (Функциональные и нефункциональные требования)
- DOCUMENTATION.md, раздел 3 (Ограничения проекта)
- Код приложения для примеров реализации

