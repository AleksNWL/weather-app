# –†–ê–ó–î–ï–õ 6. –†–ê–ó–†–ê–ë–û–¢–ö–ê –ò –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï

## 6.1 –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Weather App –æ—Å—É—â–µ—Å—Ç–≤–ª—è–ª–∞—Å—å –ø–æ—ç—Ç–∞–ø–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ–¥—Ö–æ–¥–∞ MVP (Minimum Viable Product), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏–ª —Å–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.

### 6.1.1 –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ MVP –±—ã–ª–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –ø—è—Ç—å –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –¥–æ–±–∞–≤–ª—è–ª –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ —É–ª—É—á—à–∞–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã.

**–≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–≥–æ–¥—ã**

–ù–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–≥–æ–¥–µ: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Open-Meteo Geocoding API –¥–ª—è –ø–æ–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤, –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Open-Meteo Current Weather API, –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π —á–µ—Ä–µ–∑ Open-Meteo Daily Forecast API, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —Å —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–µ–π –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –≥–æ—Ä–æ–¥–æ–≤ –≤ –ª–∞—Ç–∏–Ω–∏—Ü—É, –∞ —Ç–∞–∫–∂–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º localStorage –∏ TTL 5 –º–∏–Ω—É—Ç. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

**–≠—Ç–∞–ø 2: Backend –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

–ù–∞ –≤—Ç–æ—Ä–æ–º —ç—Ç–∞–ø–µ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å API Gateway: —Å–æ–∑–¥–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ Apollo Server –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–∞ (Weather Service –Ω–∞ –ø–æ—Ä—Ç—É 4001 –∏ Analytics Service –Ω–∞ –ø–æ—Ä—Ç—É 4002), –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –∞ —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç Gateway –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º. –î–∞–Ω–Ω—ã–π —ç—Ç–∞–ø –æ–±–µ—Å–ø–µ—á–∏–ª –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

**–≠—Ç–∞–ø 3: Frontend UI**

–ù–∞ —Ç—Ä–µ—Ç—å–µ–º —ç—Ç–∞–ø–µ –±—ã–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º React 19.x –∏ TypeScript, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å GraphQL API —á–µ—Ä–µ–∑ –Ω–∞—Ç–∏–≤–Ω—ã–π Fetch API, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Recharts –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Ç—Ä–µ–Ω–¥–æ–≤, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–∫—Ä–∞–Ω–æ–≤, –∞ —Ç–∞–∫–∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ GraphQL API —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–≠—Ç–∞–ø 4: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

–ù–∞ —á–µ—Ç–≤–µ—Ä—Ç–æ–º —ç—Ç–∞–ø–µ –±—ã–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º: —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è endpoints `/health` –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã, –∞ —Ç–∞–∫–∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥. –î–∞–Ω–Ω—ã–π —ç—Ç–∞–ø –æ–±–µ—Å–ø–µ—á–∏–ª –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö –∏ —É–ø—Ä–æ—Å—Ç–∏–ª –ø—Ä–æ—Ü–µ—Å—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

**–≠—Ç–∞–ø 5: UI/UX —É–ª—É—á—à–µ–Ω–∏—è**

–ù–∞ –ø—è—Ç–æ–º —ç—Ç–∞–ø–µ –±—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ–º–Ω–æ–π –∏ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–∞–º–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–ª–∞–≤–Ω—ã–µ CSS transitions –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å—Ç–µ–∫–ª–∞ (glassmorphism), –∞ —Ç–∞–∫–∂–µ —É–ª—É—á—à–µ–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏. –î–∞–Ω–Ω—ã–π —ç—Ç–∞–ø —É–ª—É—á—à–∏–ª –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ–≤—ã—Å–∏–ª —É–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

### 6.1.2 –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã, API Gateway –ø–∞—Ç—Ç–µ—Ä–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º GraphQL, MVC –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–∞—Ö, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker –∏ Kubernetes, –∞ —Ç–∞–∫–∂–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–µ–º–Ω–æ–π –∏ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è.

---

## 6.2 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

–í –ø—Ä–æ–µ–∫—Ç–µ Weather App —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã. –ö–∞–∂–¥—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å —É—á–µ—Ç–æ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

### 6.2.1 API Gateway Pattern

API Gateway —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `gateway/` –Ω–∞ –æ—Å–Ω–æ–≤–µ Express.js –∏ Apollo Server. Gateway –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π GraphQL endpoint –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∫–ª—é—á–∞—é—Ç GraphQL Schema (`gateway/src/config/schema.js`), –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø—Ä–æ—Å—ã (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.1), Resolvers (`gateway/src/resolvers/query.js`), –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç GraphQL –∑–∞–ø—Ä–æ—Å—ã –∏ –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç –∏—Ö –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.2), –∞ —Ç–∞–∫–∂–µ Service Clients (`gateway/src/services/serviceClients.js`) –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ —á–µ—Ä–µ–∑ REST API (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.3).

**–õ–∏—Å—Ç–∏–Ω–≥ 6.1** ‚Äì GraphQL Schema –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ñ–∞–π–ª `gateway/src/config/schema.js`)

```graphql
type Query {
  # Weather queries
  getWeather(city: String!): Weather
  getWeatherRU(city: String!): Weather
  getForecast(city: String!): Forecast
  searchCities(query: String!): [CitySearchResult]
  getCityCoordinates(city: String!): Coordinates
  getWeatherByCoords(lat: Float!, lon: Float!): Weather
  
  # Analytics queries
  getCityStats(city: String!, days: Int): CityStats
  getCityTrends(city: String!, days: Int): [TrendData]
  getPopularCities(limit: Int): [PopularCity]
  getHistory(page: Int, limit: Int): HistoryResponse
}
```

**–õ–∏—Å—Ç–∏–Ω–≥ 6.2** ‚Äì –†–µ–∞–ª–∏–∑–∞—Ü–∏—è GraphQL Resolvers (—Ñ–∞–π–ª `gateway/src/resolvers/query.js`)

```javascript
export const resolvers = {
  Query: {
    getWeather: async (_, { city }) => {
      try {
        return await weatherServiceClient.getWeather(city);
      } catch (err) {
        console.error('Weather fetch error:', err);
        throw new Error(`–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è –≥–æ—Ä–æ–¥–∞ ${city}: ${err.message}`);
      }
    },
    
    getForecast: async (_, { city }) => {
      try {
        return await weatherServiceClient.getForecast(city);
      } catch (err) {
        console.error(err);
        throw new Error(`–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è –≥–æ—Ä–æ–¥–∞ ${city}`);
      }
    },
    
    getCityStats: async (_, { city, days = 30 }) => {
      return await analyticsServiceClient.getCityStats(city, days);
    },
    
    getHistory: async (_, { page = 1, limit = 20 }) => {
      return await analyticsServiceClient.getHistory(page, limit);
    },
  },
};
```

**–õ–∏—Å—Ç–∏–Ω–≥ 6.3** ‚Äì –ö–ª–∏–µ–Ω—Ç—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ (—Ñ–∞–π–ª `gateway/src/services/serviceClients.js`)

```javascript
export const weatherServiceClient = {
  async getWeather(city) {
    const res = await fetch(`${WEATHER_SERVICE_URL}/weather/${encodeURIComponent(city)}`);
    if (!res.ok) {
      const error = await res.json();
      throw new Error(error.message || `Weather service error: ${res.status}`);
    }
    return await res.json();
  },
  
  async getForecast(city) {
    const res = await fetch(`${WEATHER_SERVICE_URL}/forecast/${encodeURIComponent(city)}`);
    if (!res.ok) throw new Error(`Forecast service error: ${res.status}`);
    return await res.json();
  },
};

export const analyticsServiceClient = {
  async getCityStats(city, days = 30) {
    try {
      const res = await fetch(
        `${ANALYTICS_SERVICE_URL}/stats/city/${encodeURIComponent(city)}?days=${days}`
      );
      if (!res.ok) throw new Error(`City stats service error: ${res.status}`);
      return await res.json();
    } catch (err) {
      console.error('City stats error:', err);
      return { avgTemp: null, maxTemp: null, minTemp: null, avgHumidity: null, totalRequests: 0, mostCommonDescription: '' };
    }
  },
  
  async getHistory(page = 1, limit = 20) {
    try {
      const res = await fetch(
        `${ANALYTICS_SERVICE_URL}/history?page=${page}&limit=${limit}`
      );
      if (!res.ok) throw new Error(`History service error: ${res.status}`);
      return await res.json();
    } catch (err) {
      console.error('History error:', err);
      return { data: [], pagination: {} };
    }
  },
};
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –≥–∏–±–∫–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ GraphQL.

### 6.2.2 Microservices Pattern

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–∞. Weather Service (`weather-service/`) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API endpoints `/weather/:city`, `/forecast/:city`, `/search/:query`, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Open-Meteo API, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Analytics Service –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—é —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –≥–æ—Ä–æ–¥–æ–≤. Analytics Service (`analytics-service/`) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API endpoints `/history`, `/stats/city/:city`, `/trends/:city`, `/popular`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö MongoDB (WeatherHistory), –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞–≥—Ä–µ–≥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Ç—Ä–µ–Ω–¥–æ–≤, –∞ —Ç–∞–∫–∂–µ –≤—ã—á–∏—Å–ª—è–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≥–æ—Ä–æ–¥–∞.

–°–µ—Ä–≤–∏—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑ REST API. Weather Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –≤ Analytics Service —á–µ—Ä–µ–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π POST –∑–∞–ø—Ä–æ—Å (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.4).

**–õ–∏—Å—Ç–∏–Ω–≥ 6.4** ‚Äì –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Analytics Service (—Ñ–∞–π–ª `weather-service/src/services/weatherService.js`)

```javascript
/**
 * Send weather data to analytics service
 */
const sendToAnalytics = async (data) => {
  try {
    console.log('üì§ Sending to analytics:', {
      city: data.city,
      originalQuery: data.originalQuery,
      country: data.country
    });
    
    await axios.post(`${ANALYTICS_SERVICE_URL}/history`, data);
  } catch (analyticsError) {
    console.error('‚ö†Ô∏è  Failed to send to analytics:', analyticsError.message);
  }
};
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –∏–∑–æ–ª—è—Ü–∏—è –æ—Ç–∫–∞–∑–æ–≤, —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ.

### 6.2.3 MVC (Model-View-Controller) Pattern

–ü–∞—Ç—Ç–µ—Ä–Ω MVC —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π, —Ç–∞–∫ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ. –ù–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ Model –≤–∫–ª—é—á–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ —Ä–∞–±–æ—Ç—É —Å API (`client/src/services/weatherService.ts`), —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (`client/src/types/index.ts`), –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (`client/src/utils/cache.ts`). View –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (`client/src/components/`), —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`client/src/pages/`), –∫–æ—Ä–Ω–µ–≤—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º (`client/src/App.tsx`). Controller –≤–∫–ª—é—á–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —Ä–æ—É—Ç–∏–Ω–≥ (`client/src/App.tsx`), —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π (`client/src/hooks/useTheme.ts`), –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ù–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ Model –≤–∫–ª—é—á–∞–µ—Ç –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö MongoDB (`analytics-service/src/models/WeatherHistory.js`), GraphQL —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (`gateway/src/config/schema.js`). View –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω GraphQL responses –∏ REST API responses. Controller –≤–∫–ª—é—á–∞–µ—Ç GraphQL resolvers (`gateway/src/resolvers/query.js`), REST API –º–∞—Ä—à—Ä—É—Ç—ã (`weather-service/src/routes/`, `analytics-service/src/routes/`).

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, —É–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞.

### 6.2.4 Cache-Aside Pattern

–ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `client/src/utils/cache.ts` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º localStorage –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Cache-Aside. –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∫—ç—à–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º –∫ API (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.5), –∑–∞–ø—Ä–æ—Å –∫ API –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –≤ –∫—ç—à–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å TTL 5 –º–∏–Ω—É—Ç (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.6).

**–õ–∏—Å—Ç–∏–Ω–≥ 6.5** ‚Äì –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—ç—à–∞ (—Ñ–∞–π–ª `client/src/utils/cache.ts`)

```typescript
const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes in milliseconds

interface CacheEntry<T> {
  data: T;
  timestamp: number;
  ttl: number;
}

export const getCache = <T>(key: string): T | null => {
  try {
    const cacheKey = `weather_cache_${key}`;
    const cached = localStorage.getItem(cacheKey);
    
    if (!cached) return null;
    
    const entry: CacheEntry<T> = JSON.parse(cached);
    const now = Date.now();
    const age = now - entry.timestamp;
    
    if (age < entry.ttl) {
      return entry.data;
    } else {
      localStorage.removeItem(cacheKey);
      return null;
    }
  } catch (error) {
    console.error('Cache get error:', error);
    return null;
  }
};

export const setCache = <T>(key: string, data: T, ttl: number = DEFAULT_TTL): void => {
  try {
    const cacheKey = `weather_cache_${key}`;
    const entry: CacheEntry<T> = {
      data,
      timestamp: Date.now(),
      ttl,
    };
    localStorage.setItem(cacheKey, JSON.stringify(entry));
  } catch (error) {
    console.error('Cache set error:', error);
  }
};
```

**–õ–∏—Å—Ç–∏–Ω–≥ 6.6** ‚Äì –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ weatherService (—Ñ–∞–π–ª `client/src/services/weatherService.ts`)

```typescript
fetchWeather: async (cityName: string): Promise<WeatherData> => {
  // Check cache first
  const cacheKey = `weather_${cityName.toLowerCase()}`;
  const cached = getCache<WeatherData>(cacheKey);
  if (cached) {
    console.log('üì¶ [Cache] Using cached weather data for', cityName);
    return cached;
  }

  // Fetch from API
  const res = await fetch(API_URL, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ query: `query { getWeather(city: "${cityName}") { ... } }` }),
  });

  const result = await res.json();
  const weatherData = result.data.getWeather;

  // Cache the result
  setCache(cacheKey, weatherData, CACHE_TTL);
  console.log('üíæ [Cache] Cached weather data for', cityName);

  return weatherData;
}
```

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: TTL (Time To Live) = 5 –º–∏–Ω—É—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ localStorage. –ö—ç—à–∏—Ä—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ: —Ç–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞ (`weather_{city}`), –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π (`forecast_{city}`), —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Ä–æ–¥–∞ (`stats_{city}_{days}`), —Ç—Ä–µ–Ω–¥—ã —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (`trends_{city}_{days}`).

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É, –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API, —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.

### 6.2.5 Event-Driven Analytics

–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –≤ Analytics Service. Weather Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø–æ–≥–æ–¥—ã –≤ Analytics Service –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.7).

**–õ–∏—Å—Ç–∏–Ω–≥ 6.7** ‚Äì –§—É–Ω–∫—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Analytics Service (—Ñ–∞–π–ª `weather-service/src/services/weatherService.js`)

```javascript
/**
 * Send weather data to analytics service
 */
const sendToAnalytics = async (data) => {
  try {
    console.log('üì§ Sending to analytics:', {
      city: data.city,
      originalQuery: data.originalQuery,
      country: data.country
    });
    
    await axios.post(`${ANALYTICS_SERVICE_URL}/history`, data);
  } catch (analyticsError) {
    console.error('‚ö†Ô∏è  Failed to send to analytics:', analyticsError.message);
    // –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ - –æ—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
  }
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã
export const getWeatherByCity = async (city) => {
  // ... –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ ...
  
  const weatherData = { /* ... –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ ... */ };
  
  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç)
  await sendToAnalytics({
    ...weatherData,
    date: new Date()
  });
  
  return weatherData;
};
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –∏–∑–æ–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π), –ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

---

## 6.3 –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ

–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Weather App –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –¥–≤—É—Ö —Å—Ä–µ–¥–∞—Ö: –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose –∏ production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ.

### 6.3.1 –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Docker Compose)

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker Compose, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `docker-compose.yml` (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.8).

**–õ–∏—Å—Ç–∏–Ω–≥ 6.8** ‚Äì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose (—Ñ–∞–π–ª `docker-compose.yml`)

```yaml
version: '3.8'

services:
  mongo:
    image: mongo:latest
    container_name: weather-mongo
    ports:
      - "27017:27017"
    volumes:
      - mongo-data:/data/db
    networks:
      - weather-network

  analytics-service:
    build: ./analytics-service
    container_name: analytics-service
    ports:
      - "4002:4002"
    environment:
      - MONGO_URI=mongodb://mongo:27017/weather
      - PORT=4002
    depends_on:
      - mongo
    networks:
      - weather-network
    command: node src/index.js

  weather-service:
    build: ./weather-service
    container_name: weather-service
    environment:
      - PORT=4001
      - ANALYTICS_SERVICE_URL=http://analytics-service:4002
    ports:
      - "4001:4001"
    depends_on:
      - analytics-service
    networks:
      - weather-network
    command: node src/index.js

  gateway:
    build: ./gateway
    container_name: gateway
    ports:
      - "4000:4000"
    environment:
      - PORT=4000
      - WEATHER_SERVICE_URL=http://weather-service:4001
      - ANALYTICS_SERVICE_URL=http://analytics-service:4002
    depends_on:
      - weather-service
      - analytics-service
    networks:
      - weather-network
    command: node src/index.js

  client:
    build: 
      context: ./client
      dockerfile: Dockerfile
    container_name: weather-client
    ports:
      - "3000:80"
    depends_on:
      - gateway
    networks:
      - weather-network

volumes:
  mongo-data:

networks:
  weather-network:
    driver: bridge
```

–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `docker-compose up --build`. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∞–¥—Ä–µ—Å–∞–º: –∫–ª–∏–µ–Ω—Ç ‚Äì http://localhost:3000, GraphQL ‚Äì http://localhost:4000/graphql, Weather API ‚Äì http://localhost:4001, Analytics API ‚Äì http://localhost:4002, MongoDB ‚Äì mongodb://localhost:27017/weather.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Docker Compose: –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π, –∏–∑–æ–ª—è—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ volumes.

### 6.3.2 Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (Kubernetes)

–î–ª—è production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç Deployment, Service –∏ PersistentVolumeClaim –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–∏—Å—Ç–µ–º—ã. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `all.yaml` (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.9).

**–õ–∏—Å—Ç–∏–Ω–≥ 6.9** ‚Äì Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (—Ñ–∞–π–ª `all.yaml`)

```yaml
# MongoDB Deployment + PVC
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mongo-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mongo
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mongo
  template:
    metadata:
      labels:
        app: mongo
    spec:
      containers:
        - name: mongo
          image: mongo:latest
          ports:
            - containerPort: 27017
          volumeMounts:
            - name: mongo-storage
              mountPath: /data/db
      volumes:
        - name: mongo-storage
          persistentVolumeClaim:
            claimName: mongo-pvc
---
apiVersion: v1
kind: Service
metadata:
  name: mongo
spec:
  selector:
    app: mongo
  ports:
    - protocol: TCP
      port: 27017
      targetPort: 27017
  type: ClusterIP
---
# Analytics Service
apiVersion: apps/v1
kind: Deployment
metadata:
  name: analytics-service
spec:
  replicas: 1
  selector:
    matchLabels:
      app: analytics-service
  template:
    metadata:
      labels:
        app: analytics-service
    spec:
      containers:
        - name: analytics-service
          image: analytics-service:latest
          ports:
            - containerPort: 4002
          env:
            - name: MONGO_URI
              value: mongodb://mongo:27017/weather
---
apiVersion: v1
kind: Service
metadata:
  name: analytics-service
spec:
  selector:
    app: analytics-service
  ports:
    - protocol: TCP
      port: 4002
      targetPort: 4002
  type: ClusterIP
---
# Weather Service
apiVersion: apps/v1
kind: Deployment
metadata:
  name: weather-service
spec:
  replicas: 1
  selector:
    matchLabels:
      app: weather-service
  template:
    metadata:
      labels:
        app: weather-service
    spec:
      containers:
        - name: weather-service
          image: weather-service:latest
          ports:
            - containerPort: 4001
---
apiVersion: v1
kind: Service
metadata:
  name: weather-service
spec:
  selector:
    app: weather-service
  ports:
    - protocol: TCP
      port: 4001
      targetPort: 4001
  type: ClusterIP
---
# Gateway (GraphQL)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gateway
spec:
  replicas: 1
  selector:
    matchLabels:
      app: gateway
  template:
    metadata:
      labels:
        app: gateway
    spec:
      containers:
        - name: gateway
          image: gateway:latest
          ports:
            - containerPort: 4000
---
apiVersion: v1
kind: Service
metadata:
  name: gateway
spec:
  selector:
    app: gateway
  ports:
    - protocol: TCP
      port: 4000
      targetPort: 4000
  type: ClusterIP
---
# React Client
apiVersion: apps/v1
kind: Deployment
metadata:
  name: client
spec:
  replicas: 1
  selector:
    matchLabels:
      app: client
  template:
    metadata:
      labels:
        app: client
    spec:
      containers:
        - name: client
          image: client:latest
          ports:
            - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: client
spec:
  selector:
    app: client
  ports:
    - protocol: TCP
      port: 3000
      targetPort: 80
  type: NodePort
```

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Kubernetes –≤–∫–ª—é—á–∞—é—Ç: MongoDB (Deployment —Å 1 —Ä–µ–ø–ª–∏–∫–æ–π, PersistentVolumeClaim 1Gi, Service —Ç–∏–ø–∞ ClusterIP), Analytics Service (Deployment —Å 1 —Ä–µ–ø–ª–∏–∫–æ–π, Service —Ç–∏–ø–∞ ClusterIP, environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è MongoDB), Weather Service (Deployment —Å 1 —Ä–µ–ø–ª–∏–∫–æ–π, Service —Ç–∏–ø–∞ ClusterIP), Gateway (Deployment —Å 1 —Ä–µ–ø–ª–∏–∫–æ–π, Service —Ç–∏–ø–∞ ClusterIP), Client (Deployment —Å 1 —Ä–µ–ø–ª–∏–∫–æ–π, Service —Ç–∏–ø–∞ NodePort –Ω–∞ –ø–æ—Ä—Ç—É 3000).

–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `kubectl apply -f all.yaml`. Kubernetes –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã `kubectl scale` –∏ `kubectl autoscale`.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Kubernetes: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏, self-healing (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —É–ø–∞–≤—à–∏—Ö pod'–æ–≤), —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏.

### 6.3.3 Health Checks –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç endpoint `/health` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Å–º. –õ–∏—Å—Ç–∏–Ω–≥ 6.10). Health checks –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤, Kubernetes liveness –∏ readiness probes, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏.

**–õ–∏—Å—Ç–∏–Ω–≥ 6.10** ‚Äì –†–µ–∞–ª–∏–∑–∞—Ü–∏—è health check endpoint (—Ñ–∞–π–ª—ã `gateway/src/index.js`, `weather-service/src/index.js`, `analytics-service/src/index.js`)

```javascript
// Gateway health check
app.get('/health', (req, res) => {
  res.json({ status: 'ok', service: 'gateway' });
});

// Weather Service health check
app.get('/health', (req, res) => {
  res.json({ status: 'ok', service: 'weather-service' });
});

// Analytics Service health check
app.get('/health', (req, res) => {
  res.json({ status: 'ok', service: 'analytics-service' });
});
```

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `PORT` ‚Äì –ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞, `MONGO_URI` ‚Äì —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB, `WEATHER_SERVICE_URL` ‚Äì URL Weather Service, `ANALYTICS_SERVICE_URL` ‚Äì URL Analytics Service. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –≥–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞, –ø—Ä–æ—Å—Ç–æ—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Kubernetes ConfigMaps –∏ Secrets.

---

## 6.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Weather App –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ REST API, GraphQL API –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### 6.4.1 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ REST API –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É endpoints Weather Service (`/weather/:city`, `/forecast/:city`, `/search/:query`, `/geocode/:city`) –∏ Analytics Service (`/history`, `/stats/city/:city`, `/trends/:city`, `/popular`, `/health`). –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –õ–∏—Å—Ç–∏–Ω–≥–µ 6.11.

**–õ–∏—Å—Ç–∏–Ω–≥ 6.11** ‚Äì –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API

```bash
# –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã
curl http://localhost:4001/weather/Moscow

# –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞
curl http://localhost:4001/forecast/London

# –¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤
curl http://localhost:4001/search/new

# –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥–æ—Ä–æ–¥–∞
curl http://localhost:4002/stats/city/Moscow?days=30

# –¢–µ—Å—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
curl http://localhost:4002/popular?limit=5

# –¢–µ—Å—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
curl http://localhost:4002/history?page=1&limit=20

# –¢–µ—Å—Ç health check
curl http://localhost:4002/health
```

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GraphQL API –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ POST –∑–∞–ø—Ä–æ—Å—ã –∫ endpoint `/graphql`. –î–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–µ–Ω GraphQL Playground –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:4000/graphql` (—Å–º. –†–∏—Å—É–Ω–æ–∫ 6.1), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤, –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å—Ö–µ–º—ã –∏ –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤.

**–†–∏—Å—É–Ω–æ–∫ 6.1** ‚Äì GraphQL Playground –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

### 6.4.2 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π: –ø–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞ (–≤–≤–æ–¥ –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö, –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ), –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –≤–ª–∞–∂–Ω–æ—Å—Ç—å, –¥–∞–≤–ª–µ–Ω–∏–µ, —Å–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞, –∏–∫–æ–Ω–∫–∞, –æ–ø–∏—Å–∞–Ω–∏–µ), –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π, –∏—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ç—Ä–µ–Ω–¥–æ–≤ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã), –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ TTL, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏), —Ç–µ–º—ã (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ–º–Ω–æ–π –∏ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–∞–º–∏, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π, –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã). –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ –†–∏—Å—É–Ω–∫–∞—Ö 6.2‚Äì6.4.

**–†–∏—Å—É–Ω–æ–∫ 6.2** ‚Äì –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã

**–†–∏—Å—É–Ω–æ–∫ 6.3** ‚Äì –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–†–∏—Å—É–Ω–æ–∫ 6.4** ‚Äì –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑–∞–ª–æ —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã < 2 —Å–µ–∫—É–Ω–¥ (–≤–∫–ª—é—á–∞—è —Å–µ—Ç–µ–≤—É—é –∑–∞–¥–µ—Ä–∂–∫—É), –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ < 1 —Å–µ–∫—É–Ω–¥–∞, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫—ç—à–∞ < 100 –º—Å. –î–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Apache Bench, wrk, k6.

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–æ –∏–∑–æ–ª—è—Ü–∏—é –æ—Ç–∫–∞–∑–æ–≤: –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ Weather Service Gateway –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É, –Ω–æ –Ω–µ –ø–∞–¥–∞–µ—Ç, Analytics Service –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å; –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ Analytics Service –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å; –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ MongoDB –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, Analytics Service –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è; –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ Open-Meteo API Weather Service –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—ã–ª–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ: –≤—Å–µ REST API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, GraphQL API –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É, —Å–∏—Å—Ç–µ–º–∞ —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –æ—Ç–∫–∞–∑–∞–º –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º, health checks —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤—Å–µ—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤.


